# 제약조건

데이터 무결성 제약조건

-데이터에 부적절한 자료가 입력되는것을 방지하기 위하여 테이블을 생성할때 각 칼럼에 대해서 정의하는 여러가지 규칙

| 제약조건 | 역할 |
| --- | --- |
| NOT NULL | NULL을 허락하지 않는다 |
| UNIQUE | 중복된 값을 허용하지 않는다. 항상 유일한 값을 가진다 |
| PRIMARY KEY | NULL을 허용하지 않고 중복된 값을 허용하지 않는다. NOT NULL조건과 UNIQUE 조건을 결합한 형태 |
| FOREIGN KEY | 참조되는 테이블의 칼럼값이 존재하면 허용한다 |
| CHECK | 저장 가능한 데이터 값의 범위나 조건을 지정하여 설정한 값만을 허용한다. |

## 키
테이블의 속성 - 고객번호, 도서번호, 판매가격, 주문일자

| 키 | 역할 | 예시 |
| --- | --- | --- |
| 슈퍼키 | 튜플을 유일하게 식별할수 있는 하나의 속성 혹은 속성의 집합 | (고객번호),(도서번호),(고객번호,도서번호) |
| 후보키 | 튜플을 유일하게 식별할수 있는 속성의 최소 집합 | (고객번호),(도서번호), |
| 기본키 | 여러 후보키중 하나를 선정하여 대표로 삼는 키 | 고객번호 |
| 대체키 | 기본키로 선정 되지 않은 후보키 | 도서번호,판매가격,주문일자 |
| 외래키 | 다른 릴레이션의 기본키를 참조 | 도서라는 테이블의 도서번호를 참조할때의 도서번호 |

## 기본키 선정시 고려사항
- 고유한 값을 가져야함.
- NULL을 비허용.
- 키값이 바뀌면 안된다.


## 무결성 제약조건
### 도메인 무결성 제약조건
- 릴레이션 내의 튜플들이 각 속성의 도메인에 지정된 값만을 가져야 한다.
- ex) NotNULL,데이터 Type
### 개체 무결성 제약조건
- 특정 테이블에서 기본키를 가져야 한다.
### 참조 무결성 제약조건
- 한 테이블의 데이터가 삭제되거나 변경될때 참조하는 테이블도 같이 변해야 한다


## 레벨 단위에서의 제약조건
### 칼럼 레벨에서의 제약조건
- 형식 - 칼럼명 데이터형 Constraint 제약조건명 제약조건
### 테이블 레벨에서의 제약조건
- 형식 - 칼럼명 데이터형, Constraint 제약조건명 제약조건(칼럼명)


## 테이블 레벨에서의 제약조건이 필요한 이유

테이블 레벨 지정을 하는 이유
 복합 키를 지정할 경우( 2개 이상의 칼럼을 기본 키로 설정하는 것)
⁻ 복합 키 형태로 제약 조건을 지정할 경우 칼럼 레벨로는 불가능하며 반드시 테이블 레벨 방식을 사용해야 한다

# 관계대수
#### 관계대수
- 릴레이션에서 원하는 결과를 얻기위하 연산을 통해 질의 하는것.

| 샐랙션 | 릴레이션에서 조건을 만족하는 투플 선택 |
| 프로젝션 | 릴레이션의 속성을 선택 |
| 개명 | 릴레이션이나 속성의 이름 변경 |
| 디비전 | 분모 릴레이션에 포함된 투플의 값을 모두 가지고있는 투플을 분자 릴레이션에서 추출 |
| 조인 | 두 릴레이션의 속성 값이 같은 튜플(Tuple)을 수평으로 결합하는 연산 |

### 조인
- 두릴레이션의 조인에 참가하는 속성이 동일한 도메인으로 구성되어 있어야된다.
- 조인 연산의 결과는 공통 속성의 속성값이 동일한 튜플만을 반환함

| 세타조인 | 조인에 참여하는 두 릴레이션의 속성값을 비교하여 조건을 만족하는 투플만 반환 ex) ( =,!=,<=,>=,<,> ) |
| 동등조인 | 세타조인에서 = 연산자를 사용한것 |
| 자연조인 | 같은 속성이 두번 나오지 않게 두번째 속성을 제거한것 |
| 외부조인 | 왼쪽 외부조인,오른쪽 외부조인,완전 외부조인으로 구분, 자연조인시 조인에 실패한 값들도 보여준다, 값이 없다면 NULL로 채운다. |
| 세미조인 | 일치하는 데이터만 추출하는 조인방법, 자연조인을 한후 두 릴레이션 중 한쪽 릴레이션의 결과만 반환 |

# sql명령어

| show databases; | 데이터베이스를 보여줌 |
| use 데이터베이스이름; | 데이터베이스이름 데이터베이스를를 사용 |
| show tables; | use한 데이터베이스 속 테이블을 보여줌 |
|select  속성 from (table이름) where 조건 | 해당 조건에 맞는 table의 속성을 보여준다 |
|select  속성 from 테이블 order by 속성 asc/desc | order by 속성 asc나 desc기준으로 정렬|

## where 조건 사용 연산자
| 술어 | 연산자 | 사용 예 |
| --- | --- | --- |
| 비교 | <,>,<=,>= | price < 20000 |
| 범위 | BETWEEN | price BETWEEN 10000 AND 20000 |
| 집합 | IN,NOT IN | price IN(10000, 20000, 30000) |
| 패턴 | LIKE | bookname LIKE '축구의 역사' |
| NULL | IS NULL,IS NOT NULL | price IS NULL|
| 복합조건 | AND, OR, NOT | (price < 20000) AND (bookname LIKE '축구의 역사') |

## 와일드 문자
| 와일드 문자 | 의미 | 사용 예 |
| --- | --- | --- |
| + | 문자열을 연결 | ‘골프’ + ‘바이블’ : ‘골프 바이블’ |
| % | 0개 이상의 문자열과 일치 | ‘%축구%’ : 축구를 포함하는 문자열 |
| [] | 1개의 문자와 일치 | ‘[0-5]%’ : 0~5사이 숫자로 시작하는문자열 |
| [^] | 1개의 문자와 불일치 | ‘[^0-5]%’ : 0~5사이 숫자로 시작하지 않는 문자열 |
| _ | 특정위치의 1개의 문자와 일치 |‘_구%’ : 두번째 위치에 ‘구’가 들어가는 문자열 |

## 집계함수
| 집계함수 | 의미 | 문법 | 사용 예 |
| --- | --- | --- | --- |
| SUM | 합 | SUM([ALL|DISTINCT] 속성이름) | SUM(price) |
| AVG | 평균 | AVG([ALL|DISTINCT] 속성이름) | AVG(price) |
| COUNT | 갯수 | COUNT([ALL|DISTINCT] 속성이름) | COUNT(price) |
| MAX | 최대값 | MAX([ALL|DISTINCT] 속성이름) | MAX(price) |
| MIN | 최소값 | MIN([ALL|DISTINCT] 속성이름) | MIN(price) |

